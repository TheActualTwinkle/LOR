syntax = "proto3";

option csharp_namespace = "DatabaseApp.AppCommunication.Grpc";

import "google/protobuf/empty.proto";

service DatabaseCommunication {  
  rpc IsUserInGroup (IsUserInGroupRequest) returns (IsUserInGroupReply);
  
  rpc GetAvailableGroups (google.protobuf.Empty) returns (GetAvailableGroupsReply);
  rpc GetAvailableLabClasses (GetAvailableLabClassesRequest) returns (GetAvailableLabClassesReply);
  
  rpc TrySetGroup (TrySetGroupRequest) returns (TrySetGroupReply);
  rpc TryEnqueueInClass (TryEnqueueInClassRequest) returns (TryEnqueueInClassReply);
}

message IsUserInGroupRequest {
  int64 userId = 1;
}

message IsUserInGroupReply {
  bool isUserInGroup = 1;
}

message GetAvailableGroupsReply {
  map<int32, string> idGroupsMap = 1;
}

message GetAvailableLabClassesRequest {
  int64 userId = 1;
}

message GetAvailableLabClassesReply {
  map<int32, string> idClassMap = 1;
  bool isFailed = 2;
  string errorMessage = 3;
}

message TrySetGroupRequest {
  int64 userId = 1;
  string groupName = 2;
}

message TrySetGroupReply {
  bool isFailed = 1;
  string errorMessage = 2;
}

message TryEnqueueInClassRequest {
  int64 userId = 1;
  int32 classId = 2;
}

message TryEnqueueInClassReply {
  repeated string studentsQueue = 1;
  bool isFailed = 2;
  string errorMessage = 3;
}